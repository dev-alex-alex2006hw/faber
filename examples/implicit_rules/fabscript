# -*- python -*-
#
# Copyright (c) 2016 Stefan Seefeld
# All rights reserved.
#
# This file is part of Faber. It is made available under the
# Boost Software License, Version 1.0.
# (Consult LICENSE or http://www.boost.org/LICENSE_1_0.txt)

from faber.artefacts.binary import binary
from faber.artefacts.library import library
from faber.tools.compiler import *
from faber.tools.cxx import *

# greet uses dynamic linking by default...
# in the default case, 'greet.cpp' gets compiled to 'greet.o',
# which gets linked to 'greet.so'
greet = library('greet', 'greet.cpp', features=define('GREET_EXPORTS'))
hello = binary('hello', ['hello.cpp', greet], features=define('GREET_IMPORTS'))
# ...which can be overridden 
hello1 = binary('hello1', ['hello.cpp', greet(features=link('static'))])
hello2 = binary('hello2', ['hello.cpp', greet(features=(link('shared'),
                                                        define('GREET_EXPORTS')))])
alias('clean', clean)

default = [hello, hello1, hello2]
